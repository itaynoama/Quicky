<!DOCTYPE html>
<html lang="en" ng-app="quicky" >
	<head>
		<meta charset="UTF-8">
		<title>Quicky App</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" type="text/css" href="../css/bootstrap-theme.min.css">
		<link rel="stylesheet" type="text/css"  href="../css/style.css">
		<link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
		<script src = "https://plus.google.com/js/client:platform.js" async defer></script>
	</head>
	<body>
	<div id="logo"></div>
		<div id="gConnect" class="button" ng-controller="loginCtrl">
			<button class="g-signin"
				  data-scope="https://www.googleapis.com/auth/plus.login email"
				  data-clientid="931089649208-rvd2fv4fdooju5h258deuat3if5j3j33.apps.googleusercontent.com"
				  data-callback="onSignInCallback"
				  data-theme="dark"
				  data-cookiepolicy="single_host_origin">
			</button>
			<script id="googleSript">
				/**
				* Handler for the signin callback triggered after the user selects an account.
				*/

				function onSignInCallback(resp) {
                    console.log('signIn');
                    if (resp['status']['signed_in'] && resp['status']['method'] == 'PROMPT'){
                        gapi.client.load('plus', 'v1', apiClientLoaded);
                    }
				}

				/**
				* Sets up an API call after the Google API client loads.
				*/
				function apiClientLoaded() {
                    console.log('api');
					gapi.client.plus.people.get({userId: 'me'}).execute(handleEmailResponse);
				}

				/**
				* Response callback for when the API client receives a response.
				*
				* @param resp The API response object with the user email and profile information.
				*/
				function handleEmailResponse(resp) {
                    console.log(resp);
					var primaryEmail;
					for (var i=0; i < resp.emails.length; i++) {
				  		if (resp.emails[i].type === 'account') primaryEmail = resp.emails[i].value;
					}
				  	angular.element(document.getElementById('gConnect')).scope().checkEmail(primaryEmail, resp);
				}
  			</script>
		</div>
		<div ui-view></div>
		<script src='./js/lib/angular/angular.min.js'></script>
		<script src="./js/lib/angular/angular-ui-router.min.js"></script>
		<script src="./js/appController.js"></script>
		<script src="js/script.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	</body>
</html>
